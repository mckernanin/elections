jQuery(function(e){e(document).ready(function(){if(e("#election-calendar").on("click",".fc-event",function(t){var n=e('*[class*="unit-"]').filter(function(){return this.className.match(/(?:^|\s)unit-/)});-1!=e(this).attr("href").indexOf("unit_date")&&(t.preventDefault(),n.removeClass("selected-election"),e(this).toggleClass("selected-election"))}),e("#schedule-elections").on("click",function(){var t={};if(t.elements=e(".selected-election"),t.elements.length){t.data=[];var n=confirm("Do you want to schedule these elections? This action cannot be undone, and will notify the units.");1==n&&(e.each(t.elements,function(){var n=e(this).attr("href").split("_");n[0]=n[0].replace("#","");var o={postID:n[0],selectedDate:n[3]};t.data.push(o)}),e.ajax({url:"/wp-json/oa-elections/v1/schedule-election",type:"post",data:{elections:t.data},success:function(t){e("#election-calendar").fullCalendar("refetchEvents"),e("#schedule-response").text(t.message),console.log("scheduled!")},fail:function(e){alert(e)}}))}}),e("body").hasClass("section-report")){var t={ID:document.body.className.match(/(^|\s)postid-(\d+)(\s|$)/)[2],registeredActiveYouth:0,youthAttendance:0,electionOne:{ballots:0,required:0},electionTwo:{ballots:0,required:0},candidates:[]};e("#registeredActiveYouth").on("change",function(){t.registeredActiveYouth=Math.abs(e(this).val())}),e("#youthAttendance").on("change",function(){t.youthAttendance=Math.abs(e(this).val()),t.youthAttendance<=t.registeredActiveYouth/2&&alert("Please check your input, over 50% of active members must be in attendance.")}),e("#electionOneBallots").on("change",function(){t.electionOne.ballots=Math.abs(e(this).val()),t.electionOne.required=Math.ceil(t.electionOne.ballots/2),e("#electionOneRequired").val(t.electionOne.required)}),e("#electionTwoBallots").on("change",function(){t.electionTwo.ballots=Math.abs(e(this).val()),t.electionTwo.required=Math.ceil(t.electionTwo.ballots/2),e("#electionTwoRequired").val(t.electionTwo.required)}),e('input[type="checkbox"]').on("change",function(){this.checked&&t.candidates.push(Math.abs(e(this).attr("name")))}),e("#submit-election-results").on("click",function(){e.ajax({url:"/wp-json/oa-elections/v1/set-election-results",type:"post",data:{report:t},success:function(e){console.log(e)},fail:function(e){alert(e)}})})}})});